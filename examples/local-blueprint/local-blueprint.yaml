tosca_definitions_version: cloudify_dsl_1_0

imports:
  - http://www.getcloudify.org/spec/cloudify/3.2rc1/types.yaml
  - https://raw.githubusercontent.com/cloudify-cosmo/cloudify-host-pool-service/master/host-pool-service.yaml


inputs:

  pool:
    type: string
    description: relative path to a pool configuration file
    default: pool.yaml
  debug:
    type: boolean
    description: |
      nable debug logging of the deployment
    default: true

node_templates:

  host:
    type: cloudify.nodes.Compute
    properties:
      install_agent: false
      ip: localhost

  host_pool_service:
    type: cloudify.nodes.HostPoolService
    properties:
      debug: { get_input: debug }
      gunicorn_debug: { get_input: debug }
      pool: { get_input: pool }
    relationships:
      - type: cloudify.relationships.contained_in
        target: host
